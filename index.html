<!DOCTYPE html>












  


<html class="theme-next pisces use-motion" lang="zh-CN">
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
























<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2">

<link rel="stylesheet" href="/css/main.css?v=7.1.1">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=7.1.1">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=7.1.1">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=7.1.1">


  <link rel="mask-icon" href="/images/logo.svg?v=7.1.1" color="#222">







<script id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '7.1.1',
    sidebar: {"position":"left","display":"post","offset":12,"onmobile":false,"dimmer":false},
    back2top: true,
    back2top_sidebar: false,
    fancybox: false,
    fastclick: false,
    lazyload: false,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>


  




  <meta name="description" content="WEB开发.狂热技术控.中二.屠龙少年.">
<meta property="og:type" content="website">
<meta property="og:title" content="无心阁">
<meta property="og:url" content="https://marlon.life/index.html">
<meta property="og:site_name" content="无心阁">
<meta property="og:description" content="WEB开发.狂热技术控.中二.屠龙少年.">
<meta property="og:locale" content="zh-CN">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="无心阁">
<meta name="twitter:description" content="WEB开发.狂热技术控.中二.屠龙少年.">





  
  
  <link rel="canonical" href="https://marlon.life/">



<script id="page.configurations">
  CONFIG.page = {
    sidebar: "",
  };
</script>

  <title>无心阁</title>
  












  <noscript>
  <style>
  .use-motion .motion-element,
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-title { opacity: initial; }

  .use-motion .logo,
  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-CN">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">无心阁</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
    
      
        <p class="site-subtitle">记录生活、技术中的二三事.</p>
      
    
    
  </div>

  <div class="site-nav-toggle">
    <button aria-label="切换导航栏">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>



<nav class="site-nav">
  
    <ul id="menu" class="menu">
      
        
        
        
          
          <li class="menu-item menu-item-home menu-item-active">

    
    
    
      
    

    

    <a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i> <br>首页</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-categories">

    
    
    
      
    

    

    <a href="/categories/" rel="section"><i class="menu-item-icon fa fa-fw fa-th"></i> <br>分类</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-archives">

    
    
    
      
    

    

    <a href="/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i> <br>归档</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-tags">

    
    
    
      
    

    

    <a href="/tags/" rel="section"><i class="menu-item-icon fa fa-fw fa-tags"></i> <br>标签</a>

  </li>

      
      
    </ul>
  

  

  
</nav>



  



</div>
    </header>

    


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          
            

          
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://marlon.life/2018/06/09/about-istio/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Marlon Fan">
      <meta itemprop="description" content="WEB开发.狂热技术控.中二.屠龙少年.">
      <meta itemprop="image" content="https://marlon-storage.oss-cn-shenzhen.aliyuncs.com/2019-05-03-9349370.jpeg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="无心阁">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2018/06/09/about-istio/" class="post-title-link" itemprop="url">关于istio</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2018-06-09 21:26:00" itemprop="dateCreated datePublished" datetime="2018-06-09T21:26:00+08:00">2018-06-09</time>
            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/技术/" itemprop="url" rel="index"><span itemprop="name">技术</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>在微服务大行其道的当下,随着服务数量的增多,语言的多样化,服务治理慢慢变成了一个大部分公司都在头痛的难题. 在这样的背景下,<strong>istio</strong>应运而生.</p>
<p>Istio是由Google/IBM/Lyft共同开发的新一代Service Mesh开源项目, 继承了服务的发现,负载,限流和熔断,链路追踪,网关等微服务必不可少的功能,把开发者从不断的维护开发环境,语言SDK中解救出来.</p>
<p>在研究过程中,笔者发现当前有一些热心的作者,已经翻译出了<a href="http://istio.doczh.cn/" target="_blank" rel="noopener">istio中文手册</a>,但是由于操作API的变更,可能无法让对应配置生效. 但还是非常感谢他们的付出.</p>
<blockquote>
<p>在当前时间(ps:2018-06-09), istio发布了<code>0.8</code>版本,  同时更换了新一版的alpha3操作API,老一版本的alpha2版本的api已经不建议使用,并且会在下一版本中删除.<br>官网中的提示:<br>This task uses the new v1alpha3 traffic management API. The old API has been deprecated and will be removed in the next Istio release. If you need to use the old version, follow the docs here.</p>
</blockquote>
<p>这里推荐英文基础不好的同学可以结合两个版本一起来看,比较容易理解.</p>
<h2 id="初探"><a href="#初探" class="headerlink" title="初探"></a>初探</h2><h3 id="k8s安装"><a href="#k8s安装" class="headerlink" title="k8s安装"></a>k8s安装</h3><p>首先,想要使用istio,我们需要先选择一个与他配合的基础设施. 由于istio对k8s的支持最为强大,所以这里我们选择了k8s为基础设施.</p>
<p>但是在安装k8s的时候发现这个集群搭起来还是有点费劲的. 想偷懒的同学可以去使用一个叫做<a href="https://github.com/kubernetes/minikube" target="_blank" rel="noopener">minikube</a>的开源软件,可以直接启动一个k8s集群.</p>
<p>由于在安装minikube的过程中发现由于一些GWF的不可描述原因,导致google的docker镜像库里面的镜像拉不回来, 有两个选择:</p>
<ol>
<li>装一个不可描述的软件,来越过GWF,下载原汁原味的minikube</li>
<li>找到阿里的同学封装的一个国内定制版本: <a href="https://yq.aliyun.com/articles/221687" target="_blank" rel="noopener">传送门</a></li>
</ol>
<p>pppppppps: 写到这里发现其实需要的篇幅还是蛮长的,抽空来写,撸代码去….</p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://marlon.life/2018/06/02/consul-quick-start/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Marlon Fan">
      <meta itemprop="description" content="WEB开发.狂热技术控.中二.屠龙少年.">
      <meta itemprop="image" content="https://marlon-storage.oss-cn-shenzhen.aliyuncs.com/2019-05-03-9349370.jpeg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="无心阁">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2018/06/02/consul-quick-start/" class="post-title-link" itemprop="url">Consul快览</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2018-06-02 21:26:00" itemprop="dateCreated datePublished" datetime="2018-06-02T21:26:00+08:00">2018-06-02</time>
            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/技术/" itemprop="url" rel="index"><span itemprop="name">技术</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="介绍"><a href="#介绍" class="headerlink" title="介绍"></a>介绍</h2><p>因为团队目前正在考虑服务化部署,所以了解下相关的技术堆栈。 作为微服务架构里重中之重的<code>服务发现</code>和<code>集群一致性KV存储</code>当然是首先要了解的.</p>
<p>现在市面上有3种比较常见的服务发现服务:</p>
<ul>
<li><a href="https://zookeeper.apache.org/" target="_blank" rel="noopener">zookeeper</a></li>
<li><a href="https://github.com/coreos/etcd" target="_blank" rel="noopener">etcd</a></li>
<li><a href="https://www.consul.io/" target="_blank" rel="noopener">consul</a></li>
</ul>
<p>在综合团队内部情况下,决定采用<code>consul</code>作为我们的服务发现中心和配置管理.</p>
<h2 id="Consul快速入门"><a href="#Consul快速入门" class="headerlink" title="Consul快速入门"></a>Consul快速入门</h2><h3 id="功能"><a href="#功能" class="headerlink" title="功能"></a>功能</h3><ol>
<li>服务发现</li>
<li>Key-&gt;Value存储</li>
<li>分布式锁</li>
<li>Watch变更</li>
<li>属于颜控的一个好看的UI</li>
</ol>
<h3 id="环境搭建"><a href="#环境搭建" class="headerlink" title="环境搭建"></a>环境搭建</h3><p>建议使用docker快速部署:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">###</span><br><span class="line"># -d 后台运行</span><br><span class="line"># --name 为容器起一个名字</span><br><span class="line"># -p 映射docker容器内端口和宿主机器</span><br><span class="line"># -server consul的命令,意思是以server端启动,ps: 还有个client端</span><br><span class="line"># -ui 可以打开一个自带的UI可视化界面</span><br><span class="line"># -bootstrap-expect 最小启动节点数量</span><br><span class="line">###</span><br><span class="line"></span><br><span class="line">docker run -d --name=consul -p 8500:8500/tcp consul agent -server -ui -bootstrap-expect=1 -client=0.0.0.0</span><br></pre></td></tr></table></figure></p>
<h3 id="golang使用"><a href="#golang使用" class="headerlink" title="golang使用"></a>golang使用</h3><p>这里提供一个golang的官方sdk: <a href="https://github.com/hashicorp/consul/api" target="_blank" rel="noopener">sdk</a></p>
<p>官方已经有一个详细的 example, 这里就不多说了,但是研究Watch的时候发现有一点坑. Api模块里并没有Watch相关功能操作,所以看了下consul的源码,在consul/watch目录下看到了大概的实现</p>
<p>consul 的 watch有几种实现方式</p>
<ol>
<li>变更时执行shell脚本</li>
<li>变更时通过http触发</li>
<li>在源码中发现有一个hook接口,挂在handler上就会自动执行</li>
</ol>
<p>这里因为避免部署上的操作,所以在应用启动中代码直接启动Watch. 下面是consul相关使用的实例代码:</p>
<figure class="highlight golang"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">    <span class="string">"encoding/json"</span></span><br><span class="line">    <span class="string">"flag"</span></span><br><span class="line">    <span class="string">"fmt"</span></span><br><span class="line">    <span class="string">"log"</span></span><br><span class="line">    <span class="string">"net/http"</span></span><br><span class="line">    <span class="string">"os"</span></span><br><span class="line">    <span class="string">"os/signal"</span></span><br><span class="line"></span><br><span class="line">    <span class="string">"github.com/hashicorp/consul/api"</span> <span class="comment">// 操作consul的api模块</span></span><br><span class="line">    <span class="string">"github.com/hashicorp/consul/watch"</span> <span class="comment">// api中未提及的watch模块</span></span><br><span class="line">    <span class="string">"github.com/marlonfan/go-library/util"</span> <span class="comment">// 一个自定义的常用的package,在github可以找到</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> consulClient *api.Client</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> (</span><br><span class="line">    serverID   = flag.String(<span class="string">"server-id"</span>, <span class="string">"nomarl"</span>, <span class="string">"service's id"</span>)</span><br><span class="line">    serverPort = flag.String(<span class="string">"port"</span>, <span class="string">":8080"</span>, <span class="string">"service's port"</span>)</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">init</span><span class="params">()</span></span> &#123;</span><br><span class="line">    flag.Parse()</span><br><span class="line">    <span class="keyword">var</span> err error</span><br><span class="line">    consulClient, err = api.NewClient(api.DefaultConfig())</span><br><span class="line">    util.CheckError(err)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">go</span> registorService()</span><br><span class="line">    <span class="keyword">go</span> waitToUnRegistService()</span><br><span class="line">    <span class="keyword">go</span> startWatch()</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 健康检查</span></span><br><span class="line">    http.HandleFunc(<span class="string">"/status"</span>, <span class="function"><span class="keyword">func</span><span class="params">(w http.ResponseWriter, r *http.Request)</span></span> &#123;</span><br><span class="line">        fmt.Println(<span class="string">"check status."</span>)</span><br><span class="line">        fmt.Fprint(w, <span class="string">"status ok!"</span>)</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    fmt.Println(<span class="string">"start listen..."</span>)</span><br><span class="line">    err := http.ListenAndServe(*serverPort, <span class="literal">nil</span>)</span><br><span class="line">    util.CheckError(err)</span><br><span class="line">    <span class="keyword">select</span> &#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// watch功能实现</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">startWatch</span><span class="params">()</span></span> &#123;</span><br><span class="line">    watchConfig := <span class="built_in">make</span>(<span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">interface</span>&#123;&#125;)</span><br><span class="line"></span><br><span class="line">    watchConfig[<span class="string">"type"</span>] = <span class="string">"service"</span></span><br><span class="line">    watchConfig[<span class="string">"service"</span>] = <span class="string">"redis"</span></span><br><span class="line">    watchConfig[<span class="string">"handler_type"</span>] = <span class="string">"script"</span></span><br><span class="line">    watchPlan, err := watch.Parse(watchConfig)</span><br><span class="line">    util.CheckError(err)</span><br><span class="line">    watchPlan.Handler = <span class="function"><span class="keyword">func</span><span class="params">(lastIndex <span class="keyword">uint64</span>, result <span class="keyword">interface</span>&#123;&#125;)</span></span> &#123;</span><br><span class="line">        services := result.([]*api.ServiceEntry)</span><br><span class="line">        str, err := json.Marshal(services)</span><br><span class="line">        util.CheckError(err)</span><br><span class="line">        fmt.Println(<span class="keyword">string</span>(str))</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> err := watchPlan.Run(<span class="string">"192.168.2.159:8500"</span>); err != <span class="literal">nil</span> &#123;</span><br><span class="line">        log.Fatalf(<span class="string">"start watch error, error message: %s"</span>, err.Error())</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 注册服务实现</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">registorService</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">var</span> err error</span><br><span class="line">    client, err := api.NewClient(api.DefaultConfig())</span><br><span class="line">    util.CheckError(err)</span><br><span class="line"></span><br><span class="line">    service := &amp;api.AgentServiceRegistration&#123;</span><br><span class="line">        ID:   *serverID,</span><br><span class="line">        Name: <span class="string">"redis"</span>,</span><br><span class="line">        Port: <span class="number">12311</span>,</span><br><span class="line">        Check: &amp;api.AgentServiceCheck&#123;</span><br><span class="line">            HTTP:     <span class="string">"http://192.168.2.159"</span> + *serverPort + <span class="string">"/status"</span>,</span><br><span class="line">            Interval: <span class="string">"1s"</span>,</span><br><span class="line">            Timeout:  <span class="string">"1s"</span>,</span><br><span class="line">        &#125;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> err = client.Agent().ServiceRegister(service); err != <span class="literal">nil</span> &#123;</span><br><span class="line">        log.Fatalf(<span class="string">"registor failed, error message: %s"</span>, err.Error())</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 收到退出信号后的服务下线处理,如果不做,服务会显示健康检查失败,同时已经下线的服务还会在控制面板看到</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">waitToUnRegistService</span><span class="params">()</span></span> &#123;</span><br><span class="line">    quit := <span class="built_in">make</span>(<span class="keyword">chan</span> os.Signal, <span class="number">1</span>)</span><br><span class="line">    signal.Notify(quit, os.Interrupt, os.Kill)</span><br><span class="line">    &lt;-quit</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> consulClient == <span class="literal">nil</span> &#123;</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> err := consulClient.Agent().ServiceDeregister(*serverID); err != <span class="literal">nil</span> &#123;</span><br><span class="line">        log.Fatal(err)</span><br><span class="line">    &#125;</span><br><span class="line">    os.Exit(<span class="number">0</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>全文完!</p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://marlon.life/2017/12/14/how-to-chain-http-handler/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Marlon Fan">
      <meta itemprop="description" content="WEB开发.狂热技术控.中二.屠龙少年.">
      <meta itemprop="image" content="https://marlon-storage.oss-cn-shenzhen.aliyuncs.com/2019-05-03-9349370.jpeg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="无心阁">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2017/12/14/how-to-chain-http-handler/" class="post-title-link" itemprop="url">【译】在GO中如何拼接HTTP处理程序</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2017-12-14 00:26:00" itemprop="dateCreated datePublished" datetime="2017-12-14T00:26:00+08:00">2017-12-14</time>
            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/技术/" itemprop="url" rel="index"><span itemprop="name">技术</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>你好,今天我想分享一下,在<code>GO</code>语言中拼接HTTP处理器.</p>
<p>在使用 GO 之前, 我使用 Nodejs + <a href="http://expressjs.com/en/4x/api.html" target="_blank" rel="noopener">ExpressJS</a> 去编写HTTP服务器应用. 这个框架提供了很简单的方法去使用中间件和拼接很多路由节点,因此,不必指定全部路由URL来为其添加处理程序.</p>
<p><img src="https://cdn-images-1.medium.com/max/1600/1*HCztzuqe1E0yZN6_UqVb4A.png" alt="图1"></p>
<p>这个想法是通过分割你的路由和处理每一个部分,拼接到处理器,每个处理程序只负责一部分. 它理解起来非常简单且非常容易使用和维护,所以首先我尝试在 GO 中做一些类似的事情.</p>
<p>开箱既用, GO 提供了一个很棒的 <a href="https://golang.org/pkg/net/http" target="_blank" rel="noopener">http</a> 包, 它包含了很多不同的工具, 当然, 还有 <code>ListenAndServe</code> 方法, 它在给定的端口上启动一个 HTTP 服务器并且通过处理程序处理它, 所以,这个处理器是什么？</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> Handler <span class="keyword">interface</span> &#123;</span><br><span class="line">    ServeHTTP(ResponseWriter, *Request)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>处理器是接口,它有一个方法 - ServeHTTP 去处理传入的请求和编写响应</p>
<p>但是,如果我们想为每一个根路由定义一个处理程序, 例如 /api/, /home, /about 等, 要怎么做?</p>
<p>ServeMux - HTTP请求复用器, 可以帮助你处理这一点. 使用 ServeMux,我们可以指定处理器方法来服务任何给定的路由, 但问题是我们不能做任何嵌套的 ServeMux .</p>
<p>文档中的例子:</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">mux := http.NewServeMux()</span><br><span class="line">mux.Handle(<span class="string">"/api/"</span>, apiHandler&#123;&#125;)</span><br><span class="line">mux.HandleFunc(<span class="string">"/"</span>, <span class="function"><span class="keyword">func</span><span class="params">(w http.ResponseWriter, req *http.Request)</span></span> &#123;</span><br><span class="line">        <span class="comment">// The "/" pattern matches everything, so we need to check</span></span><br><span class="line">        <span class="comment">// that we're at the root here.</span></span><br><span class="line">        <span class="keyword">if</span> req.URL.Path != <span class="string">"/"</span> &#123;</span><br><span class="line">                http.NotFound(w, req)</span><br><span class="line">                <span class="keyword">return</span></span><br><span class="line">        &#125;</span><br><span class="line">        fmt.Fprintf(w, <span class="string">"Welcome to the home page!"</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>我们可以看到, 在这个例子中为 <code>/api/</code> 路由自定义了一个处理器并且定义了一个处理方法给根路由. 因此任何以 <code>/api/*</code> 开头的路由都将使用 apiHandler 处理器方法. 但是如果我们需要拼接一个 usersHandler 到 apiHandler, 不通过任何的头脑风暴和编码,我们无法做到这点.</p>
<p>为此我写了一个小库 - <a href="https://github.com/goncharovnikita/gosplitter" target="_blank" rel="noopener">gosplitter</a>, 它只提供一个公共方法 <code>Match(url string, mux *http.ServeMux, http.Handler|http.HandlerFunc|interface{})</code> - 他匹配给定的路由部分 和处理器,处理方法或你给定的任何结构!</p>
<p>让我们来看一个例子:</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 定义一个处理器类型</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">type</span> APIV1Handler <span class="keyword">struct</span> &#123;</span><br><span class="line">	mux *http.ServeMux</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> ColorsHandler <span class="keyword">struct</span> &#123;</span><br><span class="line">	mux *http.ServeMux</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Start - 绑定父级到子级</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(a *APIV1Handler)</span> <span class="title">Start</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">var</span> colorsHandler = ColorsHandler&#123;</span><br><span class="line">		mux: a.mux,</span><br><span class="line">	&#125;</span><br><span class="line">	gosplitter.Match(<span class="string">"/ping"</span>, a.mux, a.HandlePing())</span><br><span class="line">	gosplitter.Match(<span class="string">"/colors"</span>, a.mux, colorsHandler)</span><br><span class="line">	colorsHandler.Start()</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(c *ColorsHandler)</span> <span class="title">Start</span><span class="params">()</span></span> &#123;</span><br><span class="line">    gosplitter.Match(<span class="string">"/black"</span>, c.mux, c.HandleBlack())</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 简单的HTTP处理器方法</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(a *APIV1Handler)</span> <span class="title">HandlePing</span><span class="params">()</span> <span class="title">func</span><span class="params">(w http.ResponseWriter, r *http.Request)</span></span> &#123;</span><br><span class="line">	<span class="keyword">return</span> <span class="function"><span class="keyword">func</span><span class="params">(w http.ResponseWriter, r *http.Request)</span></span> &#123;</span><br><span class="line">		w.Write([]<span class="keyword">byte</span>(<span class="string">"pong"</span>))</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(c *ColorsHandler)</span> <span class="title">HandleBlack</span><span class="params">()</span> <span class="title">func</span><span class="params">(w http.ResponseWriter, r *http.Request)</span></span> &#123;</span><br><span class="line">	<span class="keyword">return</span> <span class="function"><span class="keyword">func</span><span class="params">(w http.ResponseWriter, r *http.Request)</span></span> &#123;</span><br><span class="line">		w.Write([]<span class="keyword">byte</span>(<span class="string">"#000000"</span>))</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">var</span> mux = http.NewServeMux()</span><br><span class="line">    <span class="keyword">var</span> apiV1 = APIV1Handler&#123;</span><br><span class="line">	mux: mux,</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 绑定api处理器到根目录</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  gosplitter.Match(<span class="string">"/api/v1"</span>, mux, apiV1)</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 开始api的处理</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  apiV1.Start()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>举个例子:</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 定义处理器类型</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">type</span> APIV1Handler <span class="keyword">struct</span> &#123;</span><br><span class="line">	mux *http.ServeMux</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> ColorsHandler <span class="keyword">struct</span> &#123;</span><br><span class="line">	mux *http.ServeMux</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>这里我们定义了一个我们的处理器,它是一个结构体</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Start - 绑定api处理器到根目录</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(a *APIV1Handler)</span> <span class="title">Start</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">var</span> colorsHandler = ColorsHandler&#123;</span><br><span class="line">		mux: a.mux,</span><br><span class="line">	&#125;</span><br><span class="line">	gosplitter.Match(<span class="string">"/ping"</span>, a.mux, a.HandlePing())</span><br><span class="line">	gosplitter.Match(<span class="string">"/colors"</span>, a.mux, colorsHandler)</span><br><span class="line">	colorsHandler.Start()</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(c *ColorsHandler)</span> <span class="title">Start</span><span class="params">()</span></span> &#123;</span><br><span class="line">	gosplitter.Match(<span class="string">"/black"</span>, c.mux, c.HandleBlack())</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>添加一个 <code>Start</code> 方法到我们的处理器程序, 去激活处理方法</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 简单的HTTP处理器方法</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(a *APIV1Handler)</span> <span class="title">HandlePing</span><span class="params">()</span> <span class="title">func</span><span class="params">(w http.ResponseWriter, r *http.Request)</span></span> &#123;</span><br><span class="line">	<span class="keyword">return</span> <span class="function"><span class="keyword">func</span><span class="params">(w http.ResponseWriter, r *http.Request)</span></span> &#123;</span><br><span class="line">		w.Write([]<span class="keyword">byte</span>(<span class="string">"pong"</span>))</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(c *ColorsHandler)</span> <span class="title">HandleBlack</span><span class="params">()</span> <span class="title">func</span><span class="params">(w http.ResponseWriter, r *http.Request)</span></span> &#123;</span><br><span class="line">	<span class="keyword">return</span> <span class="function"><span class="keyword">func</span><span class="params">(w http.ResponseWriter, r *http.Request)</span></span> &#123;</span><br><span class="line">		w.Write([]<span class="keyword">byte</span>(<span class="string">"#000000"</span>))</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>添加 <code>HandlePing</code> 和 <code>HandleBlack</code> 到我们的 <code>APIV1Handler</code> 他响应了 <code>pong</code> 和 <code>#000000</code></p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">var</span> mux = http.NewServeMux()</span><br><span class="line">	<span class="keyword">var</span> apiV1 = APIV1Handler&#123;</span><br><span class="line">        mux: mux,</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 绑定API处理器到根路由</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	gosplitter.Match(<span class="string">"/api/v1"</span>, mux, apiV1)</span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 启动API处理器</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	apiV1.Start()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>我们在<code>main</code>方法中创建了一个新的 <code>ServeMux</code> 然后创建了一个<code>APIV1Handler</code>的实例, 把他绑定到了<code>/api/v1</code>路由,然后启动了它</p>
<p>所以在所有这些简单的操作之后我们拥有了两个工作中的路由: <code>/api/v1/ping</code> 和 <code>/api/v1/colors/black</code>会响应 <code>pong</code> 和 <code>#000000</code>.</p>
<p>使用起来不是很容易么? 我认为是这样, 现在在我的项目中使用这个库来方便的进行路由分割和拼接处理器 :)</p>
<!-- Thanks for reading! Any suggestions and critiques are welcome! -->
<p>感谢阅读, 欢迎提出任何建议和批评!</p>
<hr>
<p>via: <a href="https://medium.com/@cashalot/how-to-chain-http-handlers-in-go-33c96396b397" target="_blank" rel="noopener">https://medium.com/@cashalot/how-to-chain-http-handlers-in-go-33c96396b397</a></p>
<p>作者：<a href="https://github.com/goncharovnikita" target="_blank" rel="noopener">goncharovnikita</a><br>译者：<a href="https://github.com/MarlonFan" target="_blank" rel="noopener">MarlonFan</a></p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://marlon.life/2017/11/28/golang-thread/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Marlon Fan">
      <meta itemprop="description" content="WEB开发.狂热技术控.中二.屠龙少年.">
      <meta itemprop="image" content="https://marlon-storage.oss-cn-shenzhen.aliyuncs.com/2019-05-03-9349370.jpeg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="无心阁">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2017/11/28/golang-thread/" class="post-title-link" itemprop="url">golang多线程</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2017-11-28 00:00:00" itemprop="dateCreated datePublished" datetime="2017-11-28T00:00:00+08:00">2017-11-28</time>
            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/技术/" itemprop="url" rel="index"><span itemprop="name">技术</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p>引言</p>
</blockquote>
<p>最近在试着用<code>golang</code>做点东西,总结下golang的多线程</p>
<blockquote>
<p>什么是多线程</p>
</blockquote>
<p>一个多线程程序包含两个或多个能并发运行的部分。 程序的每一部分都称作一个线程，并且每个线程定义了一个独立的执行路径。 多线程是多任务的一种特别的形式，但多线程使用了更小的资源开销。 这里定义和线程相关的另一个术语- 进程：一个进程包括由操作系统分配的内存空间，包含一个或多个线程。</p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://marlon.life/2017/03/06/summary-for-2016/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Marlon Fan">
      <meta itemprop="description" content="WEB开发.狂热技术控.中二.屠龙少年.">
      <meta itemprop="image" content="https://marlon-storage.oss-cn-shenzhen.aliyuncs.com/2019-05-03-9349370.jpeg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="无心阁">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2017/03/06/summary-for-2016/" class="post-title-link" itemprop="url">关于过去一年的总结,以及我的2017</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2017-03-06 00:00:00" itemprop="dateCreated datePublished" datetime="2017-03-06T00:00:00+08:00">2017-03-06</time>
            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/技术/" itemprop="url" rel="index"><span itemprop="name">技术</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>这边总结已经想写很久了,却迟迟没有动笔. 或许是对过去的2016还有些没做完的事情不甘心,又或许不想太着急面对2017年23岁的自己.</p>
<p>这一年,在自己的工作上想沉淀更多,也慢慢走出了当时离开第一家公司时的偏执的想法. 为自己之后的路有了一个清晰的规划.<br>这一年,在自身方面有了一些新的想法,或许可以使自己有一个新的视野和一些机会.<br>我一直认为没有目标的人彷似行尸走肉. 在这一年里,终于找到一些新的东西,值的花更多的时间去追求.</p>
<h3 id="关于这一年做的事情"><a href="#关于这一年做的事情" class="headerlink" title="关于这一年做的事情."></a>关于这一年做的事情.</h3><ul>
<li>关于自己的<code>快签计划</code></li>
</ul>
<p>是的, 它做着做着就死了. 因为我发现有一个比他更好的产品正在推广使用. PS: 可以安丽下,<strong>滴答清单</strong></p>
<ul>
<li>关于前端方面的扩展</li>
</ul>
<p>这一年刻意试着从事了下前端相关的工作,与同事合作为前公司提供了一套基于内部管理平台的React组件. 由于当时使用不是特别广泛,也自己踩了一些坑.</p>
<ul>
<li>关于后端相关</li>
</ul>
<p>了解公司内部的后端架构,尝试的提供一些优化开发、提高效率又优雅的事情. 没错,我说的就是推广Laravel的使用…</p>
<ul>
<li>关于个人</li>
</ul>
<p>这一年还算是相对稳定的一年,寻找新的目标新的方向,休息沉淀完毕,整装待发走向下一程.</p>
<h3 id="关于未来的计划"><a href="#关于未来的计划" class="headerlink" title="关于未来的计划"></a>关于未来的计划</h3><p>哈哈,总是在新的一年列一堆一堆的新的计划,但是只有9个月的时间了. 做了一个新的决定,换了一家公司. 想挑战下其他的方面.</p>
<p>在技术方面希望对后端有更加深入的了解,在一些常应用场景下的一些架构思路.</p>
<p>在个人方面,今年还是想相对稳定点吧,想把重心放在工作和其他更加有趣的事情上</p>
<h3 id="END"><a href="#END" class="headerlink" title="END"></a>END</h3><p>2017早已开始,一直在路上.</p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://marlon.life/2016/09/07/about-laravel-dev-env/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Marlon Fan">
      <meta itemprop="description" content="WEB开发.狂热技术控.中二.屠龙少年.">
      <meta itemprop="image" content="https://marlon-storage.oss-cn-shenzhen.aliyuncs.com/2019-05-03-9349370.jpeg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="无心阁">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2016/09/07/about-laravel-dev-env/" class="post-title-link" itemprop="url">laravel 环境部署的两个推荐</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2016-09-07 15:01:00" itemprop="dateCreated datePublished" datetime="2016-09-07T15:01:00+08:00">2016-09-07</time>
            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/技术/" itemprop="url" rel="index"><span itemprop="name">技术</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p>在使用laravel的过程中,不少同学因为环境部署这一步卡住后面无法进行,还有一些同学因为环境部署的复杂而望而却步<br>在之前laravel的作者开发了基于<code>vagrant</code>的自动化环境部署方案<code>homestead</code><br>但是这一诟病是必须在机子上安装虚拟机,对于一些同学来说可能无法接受.<br>今天Marlon就给大家推荐两种另外的部署环境方案.</p>
</blockquote>
<h2 id="Laravel-Valet"><a href="#Laravel-Valet" class="headerlink" title="Laravel Valet"></a>Laravel Valet</h2><p>这个开发工具也是有laravel的创造者Jeffrey写的. 内置服务器和对应的映射命令,还有基于Ngork的公网发布. but,这个工具目前仅仅支持在mac环境下使用</p>
<h2 id="Laravel-Wagon"><a href="#Laravel-Wagon" class="headerlink" title="Laravel Wagon"></a>Laravel Wagon</h2><p>这个是一个台湾的工程师为了简化在windows下的环境部署,定制的一套开发环境.</p>
<hr>
<p>ps: 具体使用就让同学们自己研究去啦~~</p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://marlon.life/2016/09/07/about-gitlib-ci/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Marlon Fan">
      <meta itemprop="description" content="WEB开发.狂热技术控.中二.屠龙少年.">
      <meta itemprop="image" content="https://marlon-storage.oss-cn-shenzhen.aliyuncs.com/2019-05-03-9349370.jpeg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="无心阁">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2016/09/07/about-gitlib-ci/" class="post-title-link" itemprop="url">关于gitlab-ci的一些探索</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2016-09-07 15:00:00" itemprop="dateCreated datePublished" datetime="2016-09-07T15:00:00+08:00">2016-09-07</time>
            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/技术/" itemprop="url" rel="index"><span itemprop="name">技术</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>因为团队中想使用PHPCS来检查代码风格,所以考虑了两个方案.一个是基于<code>GIT HOOKS</code>的行为触发,一个是基于<code>GITLAB-CI</code>的一系列部署.考虑再三使用了<code>gitlab-ci</code>的解决方案.</p>
<h2 id="了解gitlab-ci的运行机制"><a href="#了解gitlab-ci的运行机制" class="headerlink" title="了解gitlab-ci的运行机制."></a>了解gitlab-ci的运行机制.</h2><p>要想使用<code>gitlab-ci</code>,首先要明白它的组成. 这个东西有两个东西来支撑:</p>
<ol>
<li>gitlab-ci server</li>
<li>gitlab-ci-runner</li>
</ol>
<p><code>gitlab-ci server</code>负责调度、触发Runner,以及获取返回结果. 而<code>gitlab-ci-runner</code>则是主要负责来跑自动化<code>CI</code>的一个宿主机子.</p>
<p>那么我们总结一下流程,其实是这个样子的:</p>
<p><img src="https://marlon-storage.oss-cn-shenzhen.aliyuncs.com/2019-05-03-140450.jpg" alt="2016-07-22_13:48:39.jpg"></p>
<h2 id="Runner的概念"><a href="#Runner的概念" class="headerlink" title="Runner的概念"></a>Runner的概念</h2><p><code>runner</code>可以想象成一个守护进程,来守护你注册好的<code>service</code>和<code>gitlab-ci</code>绑定. 一个宿主机里的<code>runner</code>可以维护多个不同的<code>service</code>. 而<code>gitlab-ci</code>在收到需要build的请求时,会通知<code>service</code>执行你在<code>.gitlab-ci.yml</code>里面指定好的脚本,然后根据命令行的返回结果来决定这次<code>build</code>的成功还是失败.</p>
<p><strong>在了解完了这些概念以后我们就可以很轻松的搭建一个runner了.</strong></p>
<h2 id="GITLAB-CI搭配Runner的使用"><a href="#GITLAB-CI搭配Runner的使用" class="headerlink" title="GITLAB-CI搭配Runner的使用"></a>GITLAB-CI搭配Runner的使用</h2><h4 id="安装Runner"><a href="#安装Runner" class="headerlink" title="安装Runner"></a>安装Runner</h4><ul>
<li><p>首先要找一台服务器来创建Runner，因为是要跟你的<code>gitlab</code>服务关联，所以服务器要可以访问你的<code>gitlab</code>服务。</p>
</li>
<li><p>安装gitlab-CI-multi-runner</p>
</li>
<li><p>gitlab-ci-multi-runner是CI runner的运行程序，这里有多种安装方式（<a href="https://gitlab.com/gitlab-org/gitlab-ci-multi-runner#installation/" target="_blank" rel="noopener">见这里</a>），这里我们使用了第一种：在linux中安装软件。</p>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">友情提示: 在安装时由于网络问题不好安装,可以直接找到deb包下载后安装.</span><br></pre></td></tr></table></figure>
<h4 id="gitlab-ci-multi-runner命令介绍"><a href="#gitlab-ci-multi-runner命令介绍" class="headerlink" title="gitlab-ci-multi-runner命令介绍"></a>gitlab-ci-multi-runner命令介绍</h4><ul>
<li>执行<code>gitlab-ci-multi-runner help</code>可以看到所有命令的简介，在每个命令加<code>--help</code>可以看到更加具体的参数，比如<code>gitlab-ci-multi-runner start --help</code>,命令的执行顺序为：<code>register(注册runner)--&gt;install(安装服务)--&gt;start(运行服务)</code>.</li>
</ul>
<h4 id="GITLAB-CI配置"><a href="#GITLAB-CI配置" class="headerlink" title="GITLAB-CI配置"></a>GITLAB-CI配置</h4><p>打开网址(比如你的gitlab服务地址是: <code>http://gitlab.your.company/</code>，那gitlab CI的地址就是:<code>http://gitlab.your.company/ci</code>),找到想要配置CI的项目,点击后面的按钮<code>Add project to CI</code><br>,给项目配置CI功能.进入CI项目，进入<code>Runners</code>标签页面，可以看到CI的url和token，这2个值是待会用命令注册runner时所需要的。</p>
<p>在<code>runner</code>的服务器上注册<code>runner</code>，执行命令<code>gitlab-ci-multi-runner register --user=&quot;你的用户&quot;</code>,下面是执行命令后的交互信息。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">友情提示:如果你用的是docker的执行方式，可以先把对应的docker的image下载下来，不然第一次执行CI会比较慢。</span><br></pre></td></tr></table></figure>
<ul>
<li>安装服务</li>
</ul>
<p>执行命令<code>gitlab-ci-multi-runner install -n &quot;服务名&quot;</code>,后面的服务名是自己定义的名称，用来后面启动命名使用，与其相对的命令是<code>uninstall</code>.</p>
<p>启动服务，执行命令<code>gitlab-ci-multi-runner start -n &quot;服务名&quot;</code>,与其相类似的命令有<code>stop</code><br>和<code>restart</code>.</p>
<p>验证<code>runner</code>，执行<code>gitlab-ci-multi-runner verify</code>,可以看到runner的运行情况.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">root@cloudeye:~# gitlab-ci-multi-runner verify</span><br><span class="line"></span><br><span class="line">aliveINFO[0000] 79bf814a Veryfing runner... is</span><br><span class="line">aliveINFO[0000] 207a4b34 Veryfing runner... is</span><br><span class="line">aliveINFO[0000] 20f849f7 Veryfing runner... is</span><br><span class="line">aliveINFO[0000] 6e07e13a Veryfing runner... is</span><br><span class="line">aliveINFO[0000] 23be6deb Veryfing runner... is</span><br><span class="line">aliveINFO[0000] 4e348964 Veryfing runner... is</span><br></pre></td></tr></table></figure>
<p>启动服务后，可以在刚才的<code>CI runners</code>页面看到已经有<code>runner</code>出现了。</p>
<h4 id="gitlab-ci-yaml文件"><a href="#gitlab-ci-yaml文件" class="headerlink" title="gitlab-ci.yaml文件"></a>gitlab-ci.yaml文件</h4><p>配置好了<code>runner</code>，要让<code>CI</code>跑起来，还需要在项目根目录放一个<code>.gitlab-ci.yml</code>文件,在这个文件里面可以定制CI的任务,下面是简单的示例文件，更多的用法可以看<a href="http://doc.gitlab.com/ci/yaml/README.html" target="_blank" rel="noopener">官方文档</a></p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">jobName:</span></span><br><span class="line"><span class="attr">  script:</span></span><br><span class="line"><span class="bullet">    -</span> <span class="string">ls</span></span><br><span class="line"><span class="bullet">    -</span> <span class="string">php</span> <span class="string">command.php</span></span><br><span class="line">    <span class="string">...(比喻,使用直接删掉本行)</span></span><br><span class="line"><span class="attr">  only:</span></span><br><span class="line">    <span class="string">develp</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>自己磕磕碰碰总结出来的,有不对的地方希望可以指正.</p>
</blockquote>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://marlon.life/2016/07/12/reflection/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Marlon Fan">
      <meta itemprop="description" content="WEB开发.狂热技术控.中二.屠龙少年.">
      <meta itemprop="image" content="https://marlon-storage.oss-cn-shenzhen.aliyuncs.com/2019-05-03-9349370.jpeg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="无心阁">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2016/07/12/reflection/" class="post-title-link" itemprop="url">走走停停回头看</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2016-07-12 13:15:00" itemprop="dateCreated datePublished" datetime="2016-07-12T13:15:00+08:00">2016-07-12</time>
            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/随笔/" itemprop="url" rel="index"><span itemprop="name">随笔</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>忙忙碌碌的工作做太多,快到来不及反思自己.</p>
<p>上午闲暇时间看了一眼<strong>harry哥</strong>的github,扫了几眼,过了两三年了,还是觉得好优雅,有很多自己可以学习的地方.</p>
<p>这样也好,总要给自己设置一个又一个的目标,不断前行的.</p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://marlon.life/2016/03/01/about-amy-record-2016-03-01/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Marlon Fan">
      <meta itemprop="description" content="WEB开发.狂热技术控.中二.屠龙少年.">
      <meta itemprop="image" content="https://marlon-storage.oss-cn-shenzhen.aliyuncs.com/2019-05-03-9349370.jpeg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="无心阁">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2016/03/01/about-amy-record-2016-03-01/" class="post-title-link" itemprop="url">Linda-2016-03-01 学习笔记</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2016-03-01 21:48:00" itemprop="dateCreated datePublished" datetime="2016-03-01T21:48:00+08:00">2016-03-01</time>
            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/技术/" itemprop="url" rel="index"><span itemprop="name">技术</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="等价类划分"><a href="#等价类划分" class="headerlink" title="等价类划分"></a>等价类划分</h2><blockquote>
<h3 id="概念"><a href="#概念" class="headerlink" title="概念"></a>概念</h3></blockquote>
<p>等价列划分设计方法是把所有可能的输入数据，即程序的输入域划分成若干部分（子集），然后从<strong>每一个子集中选取少量具有代表性的数据</strong>作为测试用例。</p>
<blockquote>
<h3 id="例子"><a href="#例子" class="headerlink" title="例子"></a>例子</h3></blockquote>
<ul>
<li>登陆框用户名为<code>手机</code></li>
</ul>
<h4 id="案例"><a href="#案例" class="headerlink" title="案例:"></a>案例:</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">1. 用户名肯定是一个手机号</span><br><span class="line">2. 手机号肯定是没有除数字以外的</span><br><span class="line">3. 手机号是11位数字</span><br><span class="line">4. 158、139、152、185</span><br></pre></td></tr></table></figure>
<h4 id="考虑测试用例写法"><a href="#考虑测试用例写法" class="headerlink" title="考虑测试用例写法:"></a>考虑测试用例写法:</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">1. 提供一个正常的手机号测试是否通过</span><br><span class="line">2. 提供一个不正常的手机号是否通过</span><br><span class="line">3. 提供一个带字母的数字是否通过</span><br><span class="line">4. 提供一个纯数字的手机号是否通过</span><br><span class="line">5. 提供一个非11位的数字是否通过</span><br><span class="line">6. 提供158、139、152、185号段之外的手机号是否通过</span><br><span class="line">7. 提供158、139、152、185号段内的手机号是否通过</span><br></pre></td></tr></table></figure>
<h4 id="测试准备-测试数据准备"><a href="#测试准备-测试数据准备" class="headerlink" title="测试准备(测试数据准备):"></a>测试准备(测试数据准备):</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line">- 18535663805</span><br><span class="line"></span><br><span class="line">---</span><br><span class="line">- 08535663805</span><br><span class="line">- 51010000101</span><br><span class="line"></span><br><span class="line">---</span><br><span class="line">- x5101000010</span><br><span class="line">- 1a510100001</span><br><span class="line"></span><br><span class="line">---</span><br><span class="line">- 1231413124</span><br><span class="line">- 42523</span><br><span class="line"></span><br><span class="line">---</span><br><span class="line">- 12314131241231413124</span><br><span class="line"></span><br><span class="line">---</span><br><span class="line">- 13333333333</span><br><span class="line">- 13333335555</span><br><span class="line"></span><br><span class="line">---</span><br><span class="line">- 15822222222</span><br><span class="line">- 18522222222</span><br><span class="line">- 13922222222</span><br></pre></td></tr></table></figure>
<h2 id="边界值分析"><a href="#边界值分析" class="headerlink" title="边界值分析"></a>边界值分析</h2><blockquote>
<h3 id="概念-1"><a href="#概念-1" class="headerlink" title="概念"></a>概念</h3></blockquote>
<p>使用边界值分析方法设计测试用例，首先：应确定边界情况。通常输入和输出等价类的边界，就是应着重测试的边界情况。其次，应但选取正好等于、刚刚大于或刚刚小于边界的值作为测试数据，而不是选取等价类中的典型值或任意值作为测试数据。</p>
<blockquote>
<h3 id="例子-1"><a href="#例子-1" class="headerlink" title="例子"></a>例子</h3></blockquote>
<ul>
<li>登陆框用户名为<code>手机</code></li>
<li>银行卡密码</li>
<li>qq个签</li>
</ul>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://marlon.life/2016/03/01/约定/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Marlon Fan">
      <meta itemprop="description" content="WEB开发.狂热技术控.中二.屠龙少年.">
      <meta itemprop="image" content="https://marlon-storage.oss-cn-shenzhen.aliyuncs.com/2019-05-03-9349370.jpeg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="无心阁">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2016/03/01/约定/" class="post-title-link" itemprop="url">约定</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2016-03-01 16:02:00" itemprop="dateCreated datePublished" datetime="2016-03-01T16:02:00+08:00">2016-03-01</time>
            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/随笔/" itemprop="url" rel="index"><span itemprop="name">随笔</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><strong>从梦中醒来时，梦里的情景历历在目，清晰可见。</strong>但在两三分钟内，这些场景就会一点点的湮灭。无论怎么努力，还是很难像记正常的事那样记住梦境，只能眼睁睁的看着它们从记忆里消失，不留痕迹。</p>
<p>这是每天都在发生的记忆擦除，每个人的记忆都在那一刻失效，但每个人都不介意。<strong>我们不但忘记了梦，我们还忘记了忘记。</strong></p>
<p><img src="https://marlon-storage.oss-cn-shenzhen.aliyuncs.com/2019-05-03-140529.jpg" alt="F9E9A49B-0E24-4177-8E32-B734D39EB7DC.png"></p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><span class="space">&hellip;</span><a class="page-number" href="/page/9/">9</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>



          </div>
          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <div class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image" src="https://marlon-storage.oss-cn-shenzhen.aliyuncs.com/2019-05-03-9349370.jpeg" alt="Marlon Fan">
            
              <p class="site-author-name" itemprop="name">Marlon Fan</p>
              <div class="site-description motion-element" itemprop="description">WEB开发.狂热技术控.中二.屠龙少年.</div>
          </div>

          
            <nav class="site-state motion-element">
              
                <div class="site-state-item site-state-posts">
                
                  <a href="/archives/">
                
                    <span class="site-state-item-count">84</span>
                    <span class="site-state-item-name">日志</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-categories">
                  
                    
                      <a href="/categories/">
                    
                  
                    
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">2</span>
                    <span class="site-state-item-name">分类</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-tags">
                  
                    
                      <a href="/tags/">
                    
                  
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">27</span>
                    <span class="site-state-item-name">标签</span>
                  </a>
                </div>
              
            </nav>
          

          

          

          
            <div class="links-of-author motion-element">
              
                <span class="links-of-author-item">
                  
                  
                    
                  
                  
                  <a href="https://github.com/marlonfan" title="GitHub &rarr; https://github.com/marlonfan" rel="noopener" target="_blank">GitHub</a>
                </span>
              
                <span class="links-of-author-item">
                  
                  
                    
                  
                  
                  <a href="https://www.zhihu.com/people/marlonfan" title="知乎 &rarr; https://www.zhihu.com/people/marlonfan" rel="noopener" target="_blank">知乎</a>
                </span>
              
                <span class="links-of-author-item">
                  
                  
                    
                  
                  
                  <a href="https://www.instagram.com/marlon.fan/" title="Instagram &rarr; https://www.instagram.com/marlon.fan/" rel="noopener" target="_blank">Instagram</a>
                </span>
              
                <span class="links-of-author-item">
                  
                  
                    
                  
                  
                  <a href="mailto:i@marlon.life" title="Mail &rarr; mailto:i@marlon.life">Mail</a>
                </span>
              
            </div>
          

          

          
          

          
            
          
          

        </div>
      </div>

      

      

    </div>
  </aside>
  


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; 2012 – <span itemprop="copyrightYear">2019</span>
  <span class="with-love" id="animate">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Marlon Fan</span>

  

  
</div>


  <div class="powered-by">由 <a href="https://hexo.io" class="theme-link" rel="noopener" target="_blank">Hexo</a> 强力驱动 v3.8.0</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 – <a href="https://theme-next.org" class="theme-link" rel="noopener" target="_blank">NexT.Pisces</a> v7.1.1</div>




        








        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

    

    
  </div>

  

<script>
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>


























  
  <script src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>


  


  <script src="/js/utils.js?v=7.1.1"></script>

  <script src="/js/motion.js?v=7.1.1"></script>



  
  


  <script src="/js/affix.js?v=7.1.1"></script>

  <script src="/js/schemes/pisces.js?v=7.1.1"></script>



  

  


  <script src="/js/next-boot.js?v=7.1.1"></script>


  

  

  

  
  






  




  

  

  

  

  

  

  

  

  

  

  

  

  

  

</body>
</html>
